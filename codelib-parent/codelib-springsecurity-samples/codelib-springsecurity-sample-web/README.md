# codelib-springboot-sample-springsecurity
## Spring Security
安全框架有两个重要的概念：认证（Authentication）和授权（Authorization）<br>
常用类：

* AuthenticationManagerBuilder
* JdbcUserDetailsManagerConfigurer

### Spring Security 默认建表语句：

```SQL(H2)

create table users(
    username varchar_ignorecase(50) not null primary key,
    password varchar_ignorecase(50) not null,
    enabled boolean not null
);

create table authorities (
    username varchar_ignorecase(50) not null,
    authority varchar_ignorecase(50) not null,
    constraint fk_authorities_users foreign key(username) references users(username)
);
create unique index ix_auth_username on authorities (username,authority);

create table groups (
    id bigint generated by default as identity(start with 0) primary key,
    group_name varchar_ignorecase(50) not null
);

create table group_authorities (
    group_id bigint not null,
    authority varchar(50) not null,
    constraint fk_group_authorities_group foreign key(group_id) references groups(id)
);

create table group_members (
    id bigint generated by default as identity(start with 0) primary key,
    username varchar(50) not null,
    group_id bigint not null,
    constraint fk_group_members_group foreign key(group_id) references groups(id)
);

````

## Spring Boot 对 Spring Security 的支持
Spring Boot 针对 Spring Security 的自动配置在 org.springframework.boot.autoconfigure.security包中<br>
主要通过 SecurityAutoConfiguration 和 SecurityProperties 来完成配置<br>
SecurityAutoConfiguration 导入了 SpringBootWebSecurityConfiguration 中的配置。<br>
在 SpringBootWebSecurityConfiguration 配置中，我们获得如下的自动配置：


1. AuthenticationManager具有内存存储和单个用户的bean（请参阅用户 SecurityProperties.User的属性）。
2. 常见的静态资源位置忽略（不安全的）路径（/css/\*\*，/js/\*\*， /images/\*\*，/webjars/\*\*和\*\*/favicon.ico）。
3. HTTP所有其他端点的基本安全性。
4. 发布到Spring的安全事件ApplicationEventPublisher（成功和不成功的身份验证和访问被拒绝）。
5. 默认情况下，Spring Security提供的常见的低级功能（HSTS，XSS，CSRF，缓存）都是打开的。
6. 自动配置了一个内存中的用户，帐号为 user，密码在程序启动时出现
7. 自动配置的 securityFilterChainRegistration 的 Bean。

当我们需要自己扩展的配置时，只需配置类继承 WebSecurityConfigurerAdapter 类即可，无须使用 @EnableWebSecurity 注解。

## Spring Security Java Configuration
熟悉 XML 方式的配置，有助于理解和使用 Java Configuration 配置。

## 参考
* Spring Boot中使用Spring Security进行安全控制：http://www.open-open.com/lib/view/open1464482054012.html
* Spring security 官方指南：http://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/
* Spring security Java Configuration ：http://docs.spring.io/spring-security/site/docs/4.2.3.RELEASE/reference/html/jc.html
* Mybatis Mapper XML 文件：http://www.mybatis.org/mybatis-3/zh/sqlmap-xml.html
* Spring Security教程：http://wiki.jikexueyuan.com/project/spring-security/
* holder.js下载：https://github.com/imsky/holder
* Thymeleaf：http://www.thymeleaf.org/
* Mybatis 多对多：http://www.yiibai.com/mybatis/mybatis-many2many.html
* mybatis 多对多 处理：http://www.360doc.com/content/14/0205/21/834950_350059484.shtml
* Spring boot+Spring Security 4配置整合实例：http://blog.csdn.net/code__code/article/details/53885510
* thymeleafexamples-springsecurity：https://github.com/thymeleaf/thymeleafexamples-springsecurity
* Thymeleaf + Spring Security集成基础：http://www.thymeleaf.org/doc/articles/springsecurity.html
* thymeleaf-extras-springsecurity：https://github.com/thymeleaf/thymeleaf-extras-springsecurity
